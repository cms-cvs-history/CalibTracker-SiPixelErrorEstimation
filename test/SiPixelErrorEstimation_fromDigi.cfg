process Fit = 
{
  ### keep the logging output to a nice level ###
  include "FWCore/MessageService/data/MessageLogger.cfi"

  ### keep the logging output to a nice level ###
  include "FWCore/MessageService/data/MessageLogger.cfi"
	 
  ### StripCPEfromTrackAngleESProducer es_module
  include "RecoLocalTracker/SiStripRecHitConverter/data/StripCPEfromTrackAngle.cfi"
  
  ### Pixel Clusterizer and RecHit producer modules
  include "RecoLocalTracker/SiPixelClusterizer/data/SiPixelClusterizer.cfi"
  include "RecoLocalTracker/SiPixelRecHits/data/SiPixelRecHits.cfi" 
  #Gavril
  #replace siPixelRecHits.CPE = "TemplateReco"	

  ### SiliconStrip Clusterizer and RecHit producer modules
  include "RecoLocalTracker/SiStripClusterizer/data/SiStripClusterizer_SimData.cfi"
  include "RecoLocalTracker/SiStripRecHitConverter/data/SiStripRecHitMatcher.cfi"
  include "RecoLocalTracker/SiStripRecHitConverter/data/SiStripRecHitConverter.cfi"

  ### GlobalPixelSeedGenerator module ###
  include "RecoTracker/TkSeedGenerator/data/GlobalMixedSeeds.cff"

  # CKFTrackCandidateMaker
  include "RecoTracker/CkfPattern/data/CkfTrackCandidates.cff"

  # CTF track fit with material
  include "RecoTracker/TrackProducer/data/CTFFinalFitWithMaterial.cff"

  # Validation
  include "Validation/RecoTrack/data/SiPixelTrackingRecHitsValid.cfi"
  service = DaqMonitorROOTBackEnd{ }

module PixelErrorEstimation = SiPixelErrorEstimation{
	#untracked string outputFile = "pixeltrackingrechitshist.root"
        untracked string src = "ctfWithMaterialTracks"
	# do we check that the simHit associated with recHit is of the expected particle type ?
	bool checkType = true
        # the type of particle that the simHit associated with recHits should be
        int32 genType = 13
	}

untracked PSet maxEvents = {untracked int32 input = -1}

  source = PoolSource 
  { 
    untracked vstring fileNames = {
	"file:/uscmst1b_scratch/lpc1/3DayLifetime/ggiurgiu/gen_digis_Initial_140pre5_1.root",
	"file:/uscmst1b_scratch/lpc1/3DayLifetime/ggiurgiu/gen_digis_Initial_140pre5_2.root",
	"file:/uscmst1b_scratch/lpc1/3DayLifetime/ggiurgiu/gen_digis_Initial_140pre5_3.root",
	"file:/uscmst1b_scratch/lpc1/3DayLifetime/ggiurgiu/gen_digis_Initial_140pre5_4.root",
	"file:/uscmst1b_scratch/lpc1/3DayLifetime/ggiurgiu/gen_digis_Initial_140pre5_5.root",
	"file:/uscmst1b_scratch/lpc1/3DayLifetime/ggiurgiu/gen_digis_Initial_140pre5_6.root"
  				}
   }

  #module out = PoolOutputModule 
  #{
  #  untracked string fileName = "/uscmst1b_scratch/lpc1/3DayLifetime/ggiurgiu/test.root"
  #}

  path p = 
  { siPixelClusters,siPixelRecHits, 
    siStripClusters,siStripMatchedRecHits,
    globalMixedSeeds,
    ckfTrackCandidates,
    ctfWithMaterialTracks,
    PixelErrorEstimation
  }
  
  #endpath e = 
  #{
  #  out
  #}
}
